
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://fantastic-admin.gitee.io
 * Github https://fantastic-admin.github.io
 */
  
import{y as j,b as U,C as P,d as q,u as G,D as J,F as Q,G as V,B as X,H as x,I as Y,e as F,o as w,f as O,h as g,g as n,J as T,i,K as Z,j as W,v as N,w as R,T as ee,L as B,M as te,N as oe,O as A,P as ie,_ as ae,q as se}from"./index-b8c7047d.js";import ne from"./index-2c5cb5f4.js";import re from"./index-71dd3531.js";import le from"./index-58f27093.js";import ce from"./index-b488c3f4.js";import me from"./index-4e1b5338.js";import pe from"./index-c559e4eb.js";import de from"./index-af13b3b7.js";import ue from"./index-8e91951d.js";import fe from"./iframe-08e6f657.js";import he from"./link-1be4ef98.js";import ge from"./index-2a776ca8.js";import{u as _e}from"./useMainPage-8e2e343f.js";import{u as ye}from"./useMenu-b3a02281.js";import"./index-c67ec72e.js";import"./index-1e2d2058.js";import"./index.vue_vue_type_script_setup_true_lang-50c0136f.js";import"./index-b7c18886.js";import"./index-b8c94418.js";import"./notification-2b564698.js";import"./main-19413c5d.js";import"./sub-fddd548f.js";import"./index-aa2fed81.js";import"./sortable.esm-0d19b1d3.js";import"./index-8a3c348a.js";import"./index-8c574578.js";function ve(){const d={},e={id:"wm_div_id",prefix:"mask_div_id",text:"测试水印",x:20,y:20,rows:0,cols:0,x_space:50,y_space:50,font:"微软雅黑",color:"black",fontsize:"18px",alpha:.15,width:100,height:100,angle:15,parent_width:0,parent_height:0,parent_node:null,monitor:!0};let t=!1;const _=new MutationObserver(y);function m(o){var H;Object.assign(e,o);const p=document.getElementById(e.id);(H=p==null?void 0:p.parentNode)==null||H.removeChild(p);const v=e.parent_node,s=v||document.body,u=Math.max(s.scrollWidth,s.clientWidth),k=Math.max(s.scrollHeight,s.clientHeight);let S=0,M=0;o.parent_width||o.parent_height?s&&(S=s.offsetTop||0,M=s.offsetLeft||0,e.x=e.x+M,e.y=e.y+S):s&&(S=s.offsetTop||0,M=s.offsetLeft||0);let c=document.getElementById(e.id),b=null;if(c)c.shadowRoot&&(b=c.shadowRoot);else{c=document.createElement("div"),c.id=e.id,c.setAttribute("style","pointer-events: none !important; display: block !important"),typeof c.attachShadow=="function"?b=c.attachShadow({mode:"open"}):b=c;const r=s.children,h=Math.floor(Math.random()*(r.length-1));r[h]?s.insertBefore(c,r[h]):s.appendChild(c)}e.cols=Math.floor((u-e.x)/(e.width+e.x_space));const D=Math.floor((u-e.x-e.width*e.cols)/e.cols);e.x_space=D&&e.x_space;let z;e.rows=Math.floor((k-e.y)/(e.height+e.y_space));const E=Math.floor((k-e.y-e.height*e.rows)/e.rows);e.y_space=E&&e.y_space;let I;v?(z=e.x+e.width*e.cols+e.x_space*(e.cols-1),I=e.y+e.height*e.rows+e.y_space*(e.rows-1)):(z=M+e.x+e.width*e.cols+e.x_space*(e.cols-1),I=S+e.y+e.height*e.rows+e.y_space*(e.rows-1));let L,$;for(let r=0;r<e.rows;r++){v?$=S+e.y+(e.y_space+e.height)*r:$=e.y+(k-I)/2+(e.y_space+e.height)*r;for(let h=0;h<e.cols;h++){v?L=M+e.x+(u-z)/2+(e.width+e.x_space)*h:L=e.x+(u-z)/2+(e.width+e.x_space)*h;const a=document.createElement("div"),K=document.createTextNode(e.text);a.appendChild(K),a.id=e.prefix+r+h,a.style.transform=`rotate(-${e.angle}deg)`,a.style.visibility="",a.style.position="absolute",a.style.left=`${L}px`,a.style.top=`${$}px`,a.style.overflow="hidden",a.style.zIndex="9999999",a.style.opacity=`${e.alpha}`,a.style.fontSize=e.fontsize,a.style.fontFamily=e.font,a.style.color=e.color,a.style.textAlign="center",a.style.width=`${e.width}px`,a.style.height=`${e.height}px`,a.style.display="block",a.style.userSelect="none",b==null||b.appendChild(a)}}if(e.monitor){const r={childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0};_.observe(s,r),_.observe(document.getElementById(e.id).shadowRoot,r)}}function f(){var p;const o=document.getElementById(e.id);(p=o==null?void 0:o.parentNode)==null||p.removeChild(o),_.disconnect()}function y(o){if(t){t=!1;return}(d&&o.length===1||o.length===1&&o[0].removedNodes.length>=1)&&m(d)}return{init:function(o){Object.assign(d,o),m(o)},remove:function(){t=!0,f()}}}function be(){const d=j(),e=U(),{init:t,remove:_}=ve();P(()=>d.settings.app.enableWatermark,y=>{y?m():f()},{immediate:!0}),P(()=>d.settings.app.colorScheme,()=>{d.settings.app.enableWatermark&&m()});function m(){t({text:`Fantastic-admin 水印测试 ${e.account}`,width:150,x:0,y:0,x_space:50,y_space:50,alpha:.1,color:d.settings.app.colorScheme==="light"?"black":"white"})}function f(){try{_()}catch{}}return{loadWatermark:m,removeWatermark:f}}const xe={class:"layout"},we={class:"wrapper"},ke={class:"main"},Se={key:1},Me=q({name:"Layout",__name:"index",setup(d){const e=G(),t=j(),_=J(),m=Q(),f=_e(),y=V(()=>!!e.meta.iframe),C=V(()=>!!e.meta.link);return be(),P(()=>t.settings.menu.subMenuCollapse,l=>{t.mode==="mobile"&&(l?document.body.classList.remove("overflow-hidden"):document.body.classList.add("overflow-hidden"))}),P(()=>e.path,()=>{t.mode==="mobile"&&t.$patch(l=>{l.settings.menu.subMenuCollapse=!0})}),X(()=>{x("f5",l=>{t.settings.toolbar.enablePageReload&&(l.preventDefault(),f.reload())}),x("alt+`",l=>{t.settings.menu.enableHotkeys&&(l.preventDefault(),ye().switchTo(m.actived+1<m.allMenus.length?m.actived+1:0))}),x("alt+up,alt+down",(l,o)=>{switch(l.preventDefault(),o.key){case"alt+up":f.maximize(!0);break;case"alt+down":f.maximize(!1);break}})}),Y(()=>{x.unbind("f5"),x.unbind("alt+`"),x.unbind("alt+up,alt+down")}),(l,o)=>{const p=ae,v=F("router-view"),s=F("el-backtop");return w(),O("div",xe,[g("div",{id:"app-main",class:T({"main-page-maximize":i(t).mainPageMaximizeStatus})},[n(ne),g("div",we,[g("div",{class:T(["sidebar-container",{show:i(t).mode==="mobile"&&!i(t).settings.menu.subMenuCollapse}])},[n(re),n(le)],2),g("div",{class:T(["sidebar-mask",{show:i(t).mode==="mobile"&&!i(t).settings.menu.subMenuCollapse}]),onClick:o[0]||(o[0]=u=>i(t).toggleSidebarCollapse())},null,2),g("div",{class:"main-container",style:Z({"padding-bottom":i(e).meta.paddingBottom})},[n(ce),g("div",ke,[W(g("div",{class:"exit-main-page-maximize",onClick:o[1]||(o[1]=u=>i(t).setMainPageMaximize())},[n(p,{name:"ri:logout-box-line"})],512),[[N,i(t).mainPageMaximizeStatus]]),n(v,null,{default:R(({Component:u,route:k})=>[n(ee,{name:i(t).settings.mainPage.enableTransition?i(t).settings.mainPage.transitionMode:"",mode:"out-in",appear:""},{default:R(()=>[(w(),B(oe,{include:i(_).list},[W((w(),B(te(u),{key:k.fullPath})),[[N,!(i(y)||i(C))]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),W(n(fe,null,null,512),[[N,i(y)&&!i(C)]]),i(C)?(w(),B(he,{key:0})):A("",!0)]),n(ge)],4)]),n(s,{right:20,bottom:20,title:"回到顶部"})],2),n(me),i(t).settings.app.enableUserPreferences?(w(),B(pe,{key:0})):A("",!0),n(de),i(t).settings.app.enableAppSetting?(w(),O("div",Se,[g("div",{class:"app-setting",onClick:o[2]||(o[2]=u=>i(ie).emit("global-app-setting-toggle"))},[n(p,{name:"uiw:setting-o"})]),n(ue)])):A("",!0)])}}});const Ye=se(Me,[["__scopeId","data-v-6c3d85dc"]]);export{Ye as default};
